[{"/Users/banri/Dev/UNCHAIN/ETH-NFT-game/nft-game-starter-project/src/index.js":"1","/Users/banri/Dev/UNCHAIN/ETH-NFT-game/nft-game-starter-project/src/App.js":"2","/Users/banri/Dev/UNCHAIN/ETH-NFT-game/nft-game-starter-project/src/Components/SelectCharacter/index.js":"3","/Users/banri/Dev/UNCHAIN/ETH-NFT-game/nft-game-starter-project/src/constants.js":"4","/Users/banri/Dev/UNCHAIN/ETH-NFT-game/nft-game-starter-project/src/Components/Arena/index.js":"5","/Users/banri/Dev/UNCHAIN/ETH-NFT-game/nft-game-starter-project/src/Components/LoadingIndicator/index.js":"6"},{"size":219,"mtime":1653978511240,"results":"7","hashOfConfig":"8"},{"size":4569,"mtime":1654001775223,"results":"9","hashOfConfig":"8"},{"size":4575,"mtime":1654002062496,"results":"10","hashOfConfig":"8"},{"size":424,"mtime":1653987122539,"results":"11","hashOfConfig":"8"},{"size":5015,"mtime":1654002856726,"results":"12","hashOfConfig":"8"},{"size":261,"mtime":1653978511239,"results":"13","hashOfConfig":"8"},{"filePath":"14","messages":"15","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},"1rd18e8",{"filePath":"17","messages":"18","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"19"},{"filePath":"20","messages":"21","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"22"},{"filePath":"23","messages":"24","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},{"filePath":"25","messages":"26","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"27","messages":"28","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/banri/Dev/UNCHAIN/ETH-NFT-game/nft-game-starter-project/src/index.js",[],["29","30"],"/Users/banri/Dev/UNCHAIN/ETH-NFT-game/nft-game-starter-project/src/App.js",["31"],"import React, { useEffect, useState } from 'react';\nimport twitterLogo from './assets/twitter-logo.svg';\nimport './App.css';\nimport SelectCharacter from \"./Components/SelectCharacter\";\nimport { CONTRACT_ADDRESS, transformCharacterData } from \"./constants\";\nimport { ethers } from \"ethers\";\nimport myEpicGame from \"./utils/MyEpicGame.json\";\nimport Arena from \"./Components/Arena\";\nimport LoadingIndicator from \"./Components/LoadingIndicator\";\n\n// Constants\nconst TWITTER_HANDLE = 'Bazar1305';\nconst TWITTER_LINK = `https://twitter.com/${TWITTER_HANDLE}`;\n\nconst App = () => {\n  const [currentAccount, setCurrentAccount] = useState(null);\n  const [characterNFT, setCharacterNFT] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n\n  const checkNetwork = async () => {\n    try {\n      if (window.ethereum.networkVersion !== \"4\") {\n        alert(\"Rinkeby Test Network に接続してください!\");\n      } else {\n        console.log(\"Rinkeby に接続されています。\");\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  const checkIfWalletIsConnected = async () => {\n    try {\n      const { ethereum } = window;\n      if (!ethereum) {\n        console.log(\"Make sure you have MetaMask!\");\n        setIsLoading(false);\n        return;\n      } else {\n        console.log(\"We have the ethereum object\", ethereum);\n        const accounts = await ethereum.request({ method: \"eth_accounts\"});\n        if (accounts.length !== 0) {\n          const account = accounts[0];\n          console.log(\"Found an authorized account:\", account);\n          setCurrentAccount(account);\n          checkNetwork();\n        } else {\n          console.log(\"No authorized account found\");\n        }\n      }\n    } catch (error) {\n      console.log(error);\n    }\n    setIsLoading(false);\n  };\n\n  const renderContent = () => {\n    if (isLoading) {\n      return <LoadingIndicator/>;\n    }\n    if (!currentAccount) {\n      return (\n        <div className='connect-wallet-container'>\n          <img src='https://i.imgur.com/TXBQ4cC.png' alt=\"LUFFY\"/>\n          <button className='cta-button connect-wallet-button' onClick={connectWalletAction}>Connect Wallet to Get Started</button>\n        </div>\n      );\n    } else if (currentAccount && !characterNFT) {\n      return <SelectCharacter setCharacterNFT={setCharacterNFT}/>\n    } else if (currentAccount && characterNFT) {\n      return <Arena characterNFT={characterNFT} setCharacterNFT={setCharacterNFT} />\n    }\n  }\n\n  const connectWalletAction = async () => {\n    try {\n      const { ethereum } = window;\n      if (!ethereum) {\n        alert(\"MetaMaskをダウンロードしてください!\");\n        return;\n      }\n      checkIfWalletIsConnected();\n      const accounts = await ethereum.request({\n        method: \"eth_requestAccounts\",\n      });\n\n      console.log(\"Connected\", accounts[0]);\n      setCurrentAccount(accounts[0]);\n      checkNetwork();\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  useEffect(() => {\n    setIsLoading(true);\n    checkIfWalletIsConnected();\n  }, []);\n  useEffect(() => {\n    const fetchNFTMetadata = async () => {\n      console.log(\"Checking for Character NFT on address:\", currentAccount);\n\n      const provider = new ethers.providers.Web3Provider(window.ethereum);\n      const signer = provider.getSigner();\n      const gameContract = new ethers.Contract(\n        CONTRACT_ADDRESS,\n        myEpicGame.abi,\n        signer\n      );\n\n      const txn = await gameContract.checkIfUserHasNFT();\n      if (txn.name) {\n        console.log(\"User has character NFT\");\n        setCharacterNFT(transformCharacterData(txn));\n      } else {\n        console.log(\"No character NFT found\");\n      }\n    };\n\n    if (currentAccount) {\n      console.log(\"CurrentAccount:\", currentAccount);\n      fetchNFTMetadata();\n    }\n    setIsLoading(false);\n  }, [currentAccount]);\n  return (\n    <div className=\"App\">\n      <div className=\"container\">\n        <div className=\"header-container\">\n          <p className=\"header gradient-text\">⚡️ METAVERSE GAME ⚡️</p>\n          <p className=\"sub-text\">プレイヤーと協力してボスを倒そう✨</p>\n          {renderContent()}\n        </div>\n        <div className=\"footer-container\">\n          <img alt=\"Twitter Logo\" className=\"twitter-logo\" src={twitterLogo} />\n          <a\n            className=\"footer-text\"\n            href={TWITTER_LINK}\n            target=\"_blank\"\n            rel=\"noreferrer\"\n          >{`built with @${TWITTER_HANDLE}`}</a>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n","/Users/banri/Dev/UNCHAIN/ETH-NFT-game/nft-game-starter-project/src/Components/SelectCharacter/index.js",["32"],"import React, { useEffect, useState } from \"react\";\nimport \"./SelectCharacter.css\";\nimport { ethers } from \"ethers\";\nimport { CONTRACT_ADDRESS,transformCharacterData } from \"../../constants\";\nimport myEpicGame from \"../../utils/MyEpicGame.json\";\nimport LoadingIndicator from \"../LoadingIndicator\";\n\nconst SelectCharacter = ({ setCharacterNFT }) => {\n    const [characters, setCharacters] = useState([]);\n    const [gameContract, setGameContract] = useState(null);\n    const [mintingCharacter, setMintingCharacter] = useState(false);\n\n    const mintCharacterNFTAction = (characterId) => async () => {\n        try {\n            if (gameContract) {\n                setMintingCharacter(true);\n                console.log(\"Minting character in progress...\");\n                const mintTxn = await gameContract.mintCharacterNFT(characterId);\n                await mintTxn.wait();\n                console.log(\"mintTxn:\", mintTxn);\n                setMintingCharacter(false);\n            } \n        } catch (error) {\n            console.warn(\"MintCharacterAction Error:\", error);\n            setMintingCharacter(false);\n        }\n    };\n\n    useEffect(() => {\n        const { ethereum } = window;\n        if (ethereum) {\n            const provider = new ethers.providers.Web3Provider(ethereum);\n            const signer = provider.getSigner();\n            const gameContract = new ethers.Contract(\n                CONTRACT_ADDRESS,\n                myEpicGame.abi,\n                signer\n            );\n\n            setGameContract(gameContract);\n        } else {\n            console.log(\"Ethereum object not found\");\n        }\n    }, []);\n\n    useEffect(() => {\n        const getCharacters = async () => {\n            try {\n                console.log(\"Getting contract characters to mint\");\n                const charactersTxn = await gameContract.getAllDefaultCharacters();\n\n                console.log(\"charactersTxn:\", charactersTxn);\n\n                const characters = charactersTxn.map((characterData) => \n                    transformCharacterData(characterData)\n                );\n\n                setCharacters(characters);\n            } catch (error) {\n                console.log(\"Something went wrong fetching characters:\", error);\n            }\n        };\n\n        const onCharacterMint = async (sender, tokenId, characterIndex) => {\n            console.log(\n                `CharacterNFTMinted - sender: ${sender} tokenId: ${tokenId.toNumber()} characterIndex: ${characterIndex.toNumber()}`\n            );\n            if (gameContract) {\n                const characterNFT = await gameContract.checkIfUserHasNFT();\n                console.log(\"CharacterNFT: \", characterNFT);\n                setCharacterNFT(transformCharacterData(characterNFT));\n                alert(\n                    `NFTキャラクターがMintされました -- リンクはこちらです: https://rinkeby.rarible.com/token/${\n                        gameContract.address\n                    }:${tokenId.toNumber()}?tab=details`\n                );\n            }\n        };\n        if (gameContract) {\n            getCharacters();\n            gameContract.on(\"CharacterNFTMinted\", onCharacterMint);\n        }\n\n        return () => {\n            if (gameContract) {\n                gameContract.off(\"CharacterNFTMinted\", onCharacterMint);\n            }\n        };\n    }, [gameContract]);\n\n    const renderCharacters = () =>{\n        console.log(\"characters:\",characters);\n        return characters.map((character, index) => (\n            <div className=\"character-item\" key={character.name}>\n              <div className=\"name-container\">\n                <p>{character.name}</p>\n              </div>\n              <img src={character.imageURI} alt={character.name} />\n              <button\n                type=\"button\"\n                className=\"character-mint-button\"\n                onClick={mintCharacterNFTAction(index)}\n              >{`Mint ${character.name}`}</button>\n            </div>\n          )); \n    }\n    return (\n        <div className=\"select-character-container\">\n            <h2>⏬一緒に戦う NFT キャラクターを選択⏬</h2>\n            {characters.length > 0 && (\n                <div className=\"character-grid\">{renderCharacters()}</div>\n            )}\n            {mintingCharacter && (\n            <div className=\"loading\">\n                <div className=\"indicator\">\n                <LoadingIndicator />\n                <p>Minting In Progress...</p>\n                </div>\n            </div>\n    )}\n        </div>\n    );\n};\nexport default SelectCharacter;","/Users/banri/Dev/UNCHAIN/ETH-NFT-game/nft-game-starter-project/src/constants.js",[],"/Users/banri/Dev/UNCHAIN/ETH-NFT-game/nft-game-starter-project/src/Components/Arena/index.js",["33"],"/Users/banri/Dev/UNCHAIN/ETH-NFT-game/nft-game-starter-project/src/Components/LoadingIndicator/index.js",[],{"ruleId":"34","replacedBy":"35"},{"ruleId":"36","replacedBy":"37"},{"ruleId":"38","severity":1,"message":"39","line":97,"column":6,"nodeType":"40","endLine":97,"endColumn":8,"suggestions":"41"},{"ruleId":"38","severity":1,"message":"42","line":89,"column":8,"nodeType":"40","endLine":89,"endColumn":22,"suggestions":"43"},{"ruleId":"38","severity":1,"message":"42","line":66,"column":8,"nodeType":"40","endLine":66,"endColumn":22,"suggestions":"44"},"no-native-reassign",["45"],"no-negated-in-lhs",["46"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'checkIfWalletIsConnected'. Either include it or remove the dependency array.","ArrayExpression",["47"],"React Hook useEffect has a missing dependency: 'setCharacterNFT'. Either include it or remove the dependency array. If 'setCharacterNFT' changes too often, find the parent component that defines it and wrap that definition in useCallback.",["48"],["49"],"no-global-assign","no-unsafe-negation",{"desc":"50","fix":"51"},{"desc":"52","fix":"53"},{"desc":"52","fix":"54"},"Update the dependencies array to be: [checkIfWalletIsConnected]",{"range":"55","text":"56"},"Update the dependencies array to be: [gameContract, setCharacterNFT]",{"range":"57","text":"58"},{"range":"59","text":"58"},[2994,2996],"[checkIfWalletIsConnected]",[3311,3325],"[gameContract, setCharacterNFT]",[2241,2255]]